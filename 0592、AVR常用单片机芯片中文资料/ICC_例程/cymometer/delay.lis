                         .module delay.c
                         .area text(rom, con, rel)
 0000                   .dbfile D:\ICC-AVR\examples.sl\cymometer\delay.c
 0000                   .dbfunc s delay_1ms _delay_1ms fI
                       ;              i -> R16,R17
                         .even
 0000                 _delay_1ms::
 0000                   .dbline 10{
                       ; /****************************************/
                       ; /*  ÑÓÊ±º¯Êý(mS),ÔÚ±¾ÎÄ¼þÖÐÓ¦¶¨Òå:xtalº */
                       ; /*      xtalÎª¶ÔÓ¦¾§ÕñÆµÂÊ,µ¥Î»ÎªMHZ    */
                       ; /*  ÔÚµ÷ÓÃÑÓÊ±º¯ÊýµÄÎÄ¼þÖÐ,Ó¦×÷ÈçÏÂËµÃ÷ */
                       ; /* extern void delay_ms(unsigned int n);*/
                       ; /* extern void delay_1ms(void);         */
                       ; /****************************************/
                       ; #define xtal 8   
                       ; void delay_1ms(void)
                       ; { unsigned int i;
 0000                   .dbline 11
                       ;  for(i=1;i<(unsigned int)(xtal*143-2);i++)
 0000 01E0              ldi R16,1
 0002 10E0              ldi R17,0
 0004 02C0              rjmp L5
 0006                 L2:
 0006                   .dbline 12
 0006                 L3:
 0006                   .dbline 11
 0006 0F5F              subi R16,255  ; offset = 1
 0008 1F4F              sbci R17,255
 000A                 L5:
 000A                   .dbline 11
 000A 0637              cpi R16,118
 000C E4E0              ldi R30,4
 000E 1E07              cpc R17,R30
 0010 D0F3              brlo L2
 0012                   .dbline 13}
                       ;     ;
                       ; }
 0012                 L1:
 0012 0895              ret
 0014                   .dbsym r i 16 i
 0014                   .dbfunc s delay_ms _delay_ms fI
                       ;              i -> R20,R21
                       ;              n -> R22,R23
                         .even
 0014                 _delay_ms::
 0014 00D0              rcall push_gset2
 0016 602F              mov R22,R16
 0018 712F              mov R23,R17
 001A                   .dbline 15{
                       ; void delay_ms(unsigned int n)
                       ; {
 001A                   .dbline 16
                       ;  unsigned int i=0;
 001A 4427              clr R20
 001C 5527              clr R21
 001E 03C0              rjmp L8
 0020                 L7:
 0020                   .dbline 18
 0020                   .dbline 18
 0020 EFDF              rcall _delay_1ms
 0022                   .dbline 19
 0022 4F5F              subi R20,255  ; offset = 1
 0024 5F4F              sbci R21,255
 0026                   .dbline 20
 0026                 L8:
 0026                   .dbline 17
                       ;    while(i<n)
 0026 4617              cp R20,R22
 0028 5707              cpc R21,R23
 002A D0F3              brlo L7
 002C                   .dbline 21}
                       ;    {delay_1ms();
                       ;     i++;
                       ;    }
                       ; }
 002C                 L6:
 002C 00D0              rcall pop_gset2
 002E 0895              ret
 0030                   .dbsym r i 20 i
 0030                   .dbsym r n 22 i
