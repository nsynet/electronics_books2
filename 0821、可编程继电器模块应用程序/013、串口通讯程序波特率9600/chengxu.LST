C51 COMPILER V8.05a   CHENGXU                                                              03/08/2012 11:23:11 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE CHENGXU
OBJECT MODULE PLACED IN chengxu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE chengxu.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2                                      汇诚科技
   3          
   4          实现功能:按键触发延时1分钟程序
   5          使用芯片：STC15F104E
   6          晶振：12MHZ
   7          波特率：9600
   8          编译环境：Keil
   9          作者：zhangxinchunleo
  10          网站：www.ourhc.cn
  11          淘宝店：汇诚科技 http://shop36330473.taobao.com
  12          【声明】此程序仅用于学习与参考，引用请注明版权和作者信息！     
  13          
  14          *********************************************************************/
  15          /********************************************************************/
  16          
  17          #include<reg52.h>              //库文件
  18          #define uchar unsigned char//宏定义无符号字符型
  19          #define uint unsigned int  //宏定义无符号整型
  20          /********************************************************************
  21                                      初始定义
  22          *********************************************************************/
  23          uchar dat; //用于存储单片机接收发送缓冲寄存器SBUF里面的内容
  24          /********************************************************************
  25                                      I/O定义
  26          *********************************************************************/
  27          sbit P33=P3^3;   //定义单片机P3口的第3位 （即P3.3）
  28          sbit P3_5=P3^5;
  29          /********************************************************************
  30                                      延时函数
  31          *********************************************************************/
  32          void delay(uchar t)
  33          {
  34   1        uchar i,j;
  35   1         for(i=0;i<t;i++)
  36   1         {
  37   2               for(j=13;j>0;j--);
  38   2               { ;
  39   3               }
  40   2         }
  41   1      }
  42          
  43          
  44          /********************************************************************
  45                              串口初始化,波特率9600
  46          *********************************************************************/
  47          void UartInit(void)             //9600bps@11.0592MHz
  48          {
  49   1              SCON = 0x50;            //8位数据,可变波特率
  50   1              AUXR |= 0x40;           //定时器1时钟为Fosc,即1T
*** ERROR C202 IN LINE 50 OF CHENGXU.C: 'AUXR': undefined identifier
  51   1              AUXR &= 0xFE;           //串口1选择定时器1为波特率发生器
*** ERROR C202 IN LINE 51 OF CHENGXU.C: 'AUXR': undefined identifier
  52   1              TMOD &= 0x0F;           //设定定时器1为16位自动重装方式
  53   1              TL1 = 0xE0;             //设定定时初值
C51 COMPILER V8.05a   CHENGXU                                                              03/08/2012 11:23:11 PAGE 2   

  54   1              TH1 = 0xFE;             //设定定时初值
  55   1              ET1 = 0;                //禁止定时器1中断
  56   1              TR1 = 1;                //启动定时器1
  57   1      }
  58          
  59          /********************************************************************
  60                                      主函数
  61          *********************************************************************/
  62          void main()
  63          {
  64   1      Init_Com();//串口初始化
  65   1      while(1)
  66   1      {
  67   2                            
  68   2      if ( RI ) //扫描判断是否接收到数据，
  69   2      {
  70   3      dat = SBUF; //接收数据SBUF赋与dat
  71   3      RI=0; //RI 清零。
  72   3      SBUF = dat; //在原样把数据发送回去
  73   3      } 
  74   2      }
  75   1      }
  76                  
  77          /********************************************************************
  78                                        结束
  79          *********************************************************************/

C51 COMPILATION COMPLETE.  0 WARNING(S),  2 ERROR(S)
