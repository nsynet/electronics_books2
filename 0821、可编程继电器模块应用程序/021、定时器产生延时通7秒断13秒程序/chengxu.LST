C51 COMPILER V8.05a   CHENGXU                                                              03/27/2012 17:44:23 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE CHENGXU
OBJECT MODULE PLACED IN chengxu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE chengxu.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2                                      汇诚科技
   3          
   4          实现功能:定时器产生延时1秒程序
   5          使用芯片：STC15F104E
   6          晶振：12MHZ
   7          波特率：9600
   8          编译环境：Keil
   9          作者：zhangxinchunleo
  10          网站：www.ourhc.cn
  11          淘宝店：汇诚科技 http://shop36330473.taobao.com
  12          【声明】此程序仅用于学习与参考，引用请注明版权和作者信息！     
  13          
  14          *********************************************************************/
  15          /********************************************************************/
  16          
  17          #include<reg52.h>              //库文件
  18          #define uchar unsigned char//宏定义无符号字符型
  19          #define uint unsigned int  //宏定义无符号整型
  20          /********************************************************************
  21                                      初始定义
  22          *********************************************************************/
  23          uint sec; //定义计数值，每过1/10 秒，sec 加一
  24          uchar keycnt=0;//按下次数值
  25          uint tcnt; //键值判断
  26          /********************************************************************
  27                                      I/O定义
  28          *********************************************************************/
  29          sbit P33=P3^3;   //定义单片机P3口的第3位 （即P3.3）
  30          
  31          /********************************************************************
  32                                      定时中断服务函数
  33          *********************************************************************/
  34          void t0(void) interrupt 1 using 0 //定时中断服务函数
  35          {
  36   1              tcnt++; //每过250ust tcnt 加一
  37   1              if(tcnt==400) //计满400 次（1/10 秒）时
  38   1              {
  39   2                      tcnt=0; //重新再计
  40   2                      sec++;
  41   2                      if(sec==1200) //单位为毫秒
  42   2                      {
  43   3                      P33=1;
  44   3                      }
  45   2                      if(sec==2400) //单位为毫秒
  46   2                      {
  47   3                      P33=0;
  48   3                      sec=0;
  49   3                      }
  50   2              }
  51   1      }
  52          
  53          /********************************************************************
  54                                      主函数
  55          *********************************************************************/
C51 COMPILER V8.05a   CHENGXU                                                              03/27/2012 17:44:23 PAGE 2   

  56          void main()
  57          {
  58   1              TMOD=0x02; //定时器工作在方式2
  59   1              TH0=0x06; //对TH0 TL0 赋值
  60   1              TL0=0x06;
  61   1              TR0=1; //开始定时
  62   1              ET0=1;
  63   1              EA=1;
  64   1              sec=0;
  65   1              P33=0;
  66   1              while(1)
  67   1              {
  68   2      
  69   2              }
  70   1      }               
  71          
  72                  
  73          /********************************************************************
  74                                        结束
  75          *********************************************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     91    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
