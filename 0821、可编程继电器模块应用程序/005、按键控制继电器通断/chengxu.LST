C51 COMPILER V8.05a   CHENGXU                                                              01/02/2012 15:07:52 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE CHENGXU
OBJECT MODULE PLACED IN chengxu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE chengxu.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2                                      汇诚科技
   3          
   4          实现功能:秒延时2秒程序
   5          使用芯片：STC15F104E
   6          晶振：12MHZ
   7          波特率：9600
   8          编译环境：Keil
   9          作者：zhangxinchunleo
  10          网站：www.ourhc.cn
  11          淘宝店：汇诚科技 http://shop36330473.taobao.com
  12          【声明】此程序仅用于学习与参考，引用请注明版权和作者信息！     
  13          
  14          *********************************************************************/
  15          /********************************************************************/
  16          
  17          #include<reg52.h>              //库文件
  18          #define uchar unsigned char//宏定义无符号字符型
  19          #define uint unsigned int  //宏定义无符号整型
  20          
  21          /********************************************************************
  22                                      I/O定义
  23          *********************************************************************/
  24          sbit P33=P3^3;   //定义单片机P3口的第3位 （即P3.3）
  25          sbit P3_5=P3^5;
  26          uchar keycnt=0;//按下次数值
  27          /********************************************************************
  28                                      延时函数
  29          *********************************************************************/
  30          void delay(uchar t)
  31          {
  32   1        uchar i,j;
  33   1         for(i=0;i<t;i++)
  34   1         {
  35   2               for(j=13;j>0;j--);
  36   2               { ;
  37   3               }
  38   2         }
  39   1      }
  40          
  41          /********************************************************************
  42                                      按键扫描函数
  43          *********************************************************************/
  44          void KEY() //按键扫描程序
  45          {
  46   1      uchar i,j;
  47   1      if(P3_5==0)
  48   1              {
  49   2              delay(20);
  50   2              if(P3_5==0)
  51   2                      {
  52   3                              keycnt++;
  53   3      /********************************************************************
  54   3                                  按下次数判断函数
  55   3      *********************************************************************/
C51 COMPILER V8.05a   CHENGXU                                                              01/02/2012 15:07:52 PAGE 2   

  56   3      switch(keycnt) //按下次数判断
  57   3              {
  58   4              case 1: //第一次按下
  59   4              P33=0;
  60   4              break;
  61   4              case 2: //第二次按下
  62   4              P33=1;
  63   4              keycnt=0;
  64   4              break;
  65   4              }
  66   3              while(P3_5==0);
  67   3                      } 
  68   2              }
  69   1      }
*** WARNING C280 IN LINE 46 OF CHENGXU.C: 'i': unreferenced local variable
*** WARNING C280 IN LINE 46 OF CHENGXU.C: 'j': unreferenced local variable
  70          
  71          /********************************************************************
  72                                      主函数
  73          *********************************************************************/
  74          void main()
  75          {
  76   1              while(1)
  77   1              {
  78   2               KEY();
  79   2              }
  80   1      }               
  81                  
  82          /********************************************************************
  83                                        结束
  84          *********************************************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     55    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
